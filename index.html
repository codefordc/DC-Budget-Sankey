<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />  
    <title>Sankey Javascript Demo</title>
    <script src="raphael.js" type="text/javascript"></script>
    <script src="jquery.js" type="text/javascript"></script>
    <script src="snakey.js" type="text/javascript"></script>    
  </head>
  <body>
    <script type='text/javascript'>
      $(document).ready(function() {
       var raw_data = 
[




["Budget and Fiscal Services",406189,"Consultant Services"],
["Budget and Fiscal Services",15600,"Holiday Overtime Pay"],
["Budget and Fiscal Services",369078,"Non-Holiday Overtime Pay"],
["Budget and Fiscal Services",280650,"Other Services - Not Classified"],
["Budget and Fiscal Services",568632,"Personal Svcs-Contract Positions"],
["Budget and Fiscal Services",18021660,"Regular Pay"],
["Budget and Fiscal Services",0,"Sub Recipient Grants"],
["Budget and Fiscal Services",17110,"Unleaded Gas"],
["Community Services",0,"Consultant Services"],
["Community Services",44474000,"DHCD-Rental Subsidy"],
["Community Services",0,"Electricity"],
["Community Services",0,"Holiday Overtime Pay"],
["Community Services",2500,"Non-Holiday Overtime Pay"],
["Community Services",1603387,"Other Services - Not Classified"],
["Community Services",64404,"Personal Svcs-Contract Positions"],
["Community Services",10247148,"Regular Pay"],
["Community Services",11841386,"Sub Recipient Grants"],
["Community Services",2500,"Unleaded Gas"],
["Corporation Counsel",1702472,"Consultant Services"],
["Corporation Counsel",0,"Non-Holiday Overtime Pay"],
["Corporation Counsel",125000,"Other Services - Not Classified"],
["Corporation Counsel",0,"Personal Svcs-Contract Positions"],
["Corporation Counsel",5489136,"Regular Pay"],
["Customer Services",0,"Consultant Services"],
["Customer Services",140123,"Electricity"],
["Customer Services",0,"Holiday Overtime Pay"],
["Customer Services",78113,"Non-Holiday Overtime Pay"],
["Customer Services",4621121,"Other Services - Not Classified"],
["Customer Services",467856,"Personal Svcs-Contract Positions"],
["Customer Services",12086544,"Regular Pay"],
["Customer Services",0,"Solid Waste Disposal (including management svcs)"],
["Design and Construction",100,"Chemical Supplies"],
["Design and Construction",55000,"Consultant Services"],
["Design and Construction",529413,"Electricity"],
["Design and Construction",10246,"Holiday Overtime Pay"],
["Design and Construction",220466,"Non-Holiday Overtime Pay"],
["Design and Construction",829750,"Other Services - Not Classified"],
["Design and Construction",0,"Personal Svcs-Contract Positions"],
["Design and Construction",18032136,"Regular Pay"],
["Emergency Management",0,"Consultant Services"],
["Emergency Management",350,"Diesel"],
["Emergency Management",75475,"Electricity"],
["Emergency Management",700,"Holiday Overtime Pay"],
["Emergency Management",35000,"Non-Holiday Overtime Pay"],
["Emergency Management",41500,"Other Services - Not Classified"],
["Emergency Management",0,"Personal Svcs-Contract Positions"],
["Emergency Management",755520,"Regular Pay"],
["Emergency Services",557089,"Diesel"],
["Emergency Services",130907,"Electricity"],
["Emergency Services",595775,"Holiday Overtime Pay"],
["Emergency Services",4449698,"Non-Holiday Overtime Pay"],
["Emergency Services",17000,"Other Services - Not Classified"],
["Emergency Services",935772,"Personal Svcs-Contract Positions"],
["Emergency Services",436650,"Public Liability Insurance"],
["Emergency Services",20227032,"Regular Pay"],
["Emergency Services",2300,"Solid Waste Disposal (including management svcs)"],
["Emergency Services",70906,"Unleaded Gas"],
["Enterprise Services",34400,"Chemical Supplies"],
["Enterprise Services",60188,"Diesel"],
["Enterprise Services",2690891,"Electricity"],
["Enterprise Services",161887,"Holiday Overtime Pay"],
["Enterprise Services",282586,"Non-Holiday Overtime Pay"],
["Enterprise Services",676721,"Other Services - Not Classified"],
["Enterprise Services",936852,"Personal Svcs-Contract Positions"],
["Enterprise Services",400,"Recycling Services"],
["Enterprise Services",11373900,"Regular Pay"],
["Enterprise Services",63500,"Solid Waste Disposal (including management svcs)"],
["Enterprise Services",168529,"Unleaded Gas"],
["Environmental Services",8355950,"Chemical Supplies"],
["Environmental Services",9325000,"Consultant Services"],
["Environmental Services",1480900,"Diesel"],
["Environmental Services",25867539,"Electricity"],
["Environmental Services",1583950,"Holiday Overtime Pay"],
["Environmental Services",10231990,"Non-Holiday Overtime Pay"],
["Environmental Services",141872981,"Other Services - Not Classified"],
["Environmental Services",36576,"Personal Svcs-Contract Positions"],
["Environmental Services",10948580,"Recycling Services"],
["Environmental Services",52086816,"Regular Pay"],
["Environmental Services",17378901,"Solid Waste Disposal (including management svcs)"],
["Environmental Services",0,"Unleaded Gas"],
["Facility Maintenance",83500,"Chemical Supplies"],
["Facility Maintenance",0,"Consultant Services"],
["Facility Maintenance",27270,"Diesel"],
["Facility Maintenance",17581489,"Electricity"],
["Facility Maintenance",158650,"Holiday Overtime Pay"],
["Facility Maintenance",2477911,"Non-Holiday Overtime Pay"],
["Facility Maintenance",1015212,"Other Services - Not Classified"],
["Facility Maintenance",452196,"Personal Svcs-Contract Positions"],
["Facility Maintenance",15000,"Recycling Services"],
["Facility Maintenance",31560732,"Regular Pay"],
["Facility Maintenance",535316,"Solid Waste Disposal (including management svcs)"],
["Facility Maintenance",1376881,"Unleaded Gas"],
["Fire",207560,"Auto Allowance HPD/HFD/CCL"],
["Fire",43217,"Chemical Supplies"],
["Fire",541,"Consultant Services"],
["Fire",522711,"Diesel"],
["Fire",1543812,"Electricity"],
["Fire",5002635,"Holiday Overtime Pay"],
["Fire",5991748,"Non-Holiday Overtime Pay"],
["Fire",153150,"Other Services - Not Classified"],
["Fire",66996,"Personal Svcs-Contract Positions"],
["Fire",1500,"Recycling Services"],
["Fire",70485480,"Regular Pay"],
["Fire",1050,"Solid Waste Disposal (including management svcs)"],
["Fire",152253,"Unleaded Gas"],
["Human Resources",150,"Consultant Services"],
["Human Resources",0,"Holiday Overtime Pay"],
["Human Resources",38935,"Non-Holiday Overtime Pay"],
["Human Resources",106700,"Other Services - Not Classified"],
["Human Resources",80832,"Personal Svcs-Contract Positions"],
["Human Resources",5079768,"Regular Pay"],
["Human Resources",180,"Solid Waste Disposal (including management svcs)"],
["Information Technology",112000,"Consultant Services"],
["Information Technology",6630,"Electricity"],
["Information Technology",17500,"Holiday Overtime Pay"],
["Information Technology",215879,"Non-Holiday Overtime Pay"],
["Information Technology",0,"Other Services - Not Classified"],
["Information Technology",0,"Personal Svcs-Contract Positions"],
["Information Technology",8508792,"Regular Pay"],
["Managing Director",9600,"Non-Holiday Overtime Pay"],
["Managing Director",6999,"Other Services - Not Classified"],
["Managing Director",68484,"Personal Svcs-Contract Positions"],
["Managing Director",1823508,"Regular Pay"],
["Managing Director",0,"Sub Recipient Grants"],
["Mayor",1700,"Non-Holiday Overtime Pay"],
["Mayor",5702,"Other Services - Not Classified"],
["Mayor",0,"Personal Svcs-Contract Positions"],
["Mayor",437940,"Regular Pay"],
["Mayor",0,"Unleaded Gas"],
["Medical Examiner",19040,"Holiday Overtime Pay"],
["Medical Examiner",28900,"Non-Holiday Overtime Pay"],
["Medical Examiner",93300,"Other Services - Not Classified"],
["Medical Examiner",48756,"Personal Svcs-Contract Positions"],
["Medical Examiner",1162296,"Regular Pay"],
["Medical Examiner",5208,"Solid Waste Disposal (including management svcs)"],
["Neighborhood Commission",17000,"Non-Holiday Overtime Pay"],
["Neighborhood Commission",42000,"Other Services - Not Classified"],
["Neighborhood Commission",0,"Personal Svcs-Contract Positions"],
["Neighborhood Commission",644568,"Regular Pay"],
["Parks and Recreation",377000,"Chemical Supplies"],
["Parks and Recreation",8383,"Diesel"],
["Parks and Recreation",6777213,"Electricity"],
["Parks and Recreation",309443,"Holiday Overtime Pay"],
["Parks and Recreation",736500,"Non-Holiday Overtime Pay"],
["Parks and Recreation",2396369,"Other Services - Not Classified"],
["Parks and Recreation",4954992,"Personal Svcs-Contract Positions"],
["Parks and Recreation",21000,"Recycling Services"],
["Parks and Recreation",36013404,"Regular Pay"],
["Parks and Recreation",505500,"Solid Waste Disposal (including management svcs)"],
["Parks and Recreation",5695,"Unleaded Gas"],
["Planning and Permitting",320000,"Consultant Services"],
["Planning and Permitting",147036,"Non-Holiday Overtime Pay"],
["Planning and Permitting",439000,"Other Services - Not Classified"],
["Planning and Permitting",75936,"Personal Svcs-Contract Positions"],
["Planning and Permitting",16854576,"Regular Pay"],
["Planning and Permitting",0,"Unleaded Gas"],
["Police",9022749,"Auto Allowance HPD/HFD/CCL"],
["Police",2000,"Chemical Supplies"],
["Police",0,"Consultant Services"],
["Police",8850,"Diesel"],
["Police",31613,"Electricity"],
["Police",5442257,"Holiday Overtime Pay"],
["Police",16611150,"Non-Holiday Overtime Pay"],
["Police",3361250,"Other Services - Not Classified"],
["Police",1612188,"Personal Svcs-Contract Positions"],
["Police",162319548,"Regular Pay"],
["Police",6427198,"Unleaded Gas"],
["Prosecuting Attorney",0,"Consultant Services"],
["Prosecuting Attorney",100,"Holiday Overtime Pay"],
["Prosecuting Attorney",40750,"Non-Holiday Overtime Pay"],
["Prosecuting Attorney",741000,"Other Services - Not Classified"],
["Prosecuting Attorney",161496,"Personal Svcs-Contract Positions"],
["Prosecuting Attorney",14283792,"Regular Pay"],
["Prosecuting Attorney",0,"Sub Recipient Grants"],
["Royal Hawaiian Band",30000,"Non-Holiday Overtime Pay"],
["Royal Hawaiian Band",52248,"Personal Svcs-Contract Positions"],
["Royal Hawaiian Band",1836732,"Regular Pay"],
["Royal Hawaiian Band",0,"Unleaded Gas"],
["Transportation Services",8944719,"Bus Parts**"],
["Transportation Services",235000,"Consultant Services"],
["Transportation Services",24778427,"Diesel"],
["Transportation Services",1039339,"Electricity"],
["Transportation Services",17401486,"Health, Welfare & Medical Plans-Bargaining Unit Em"],
["Transportation Services",3000,"Holiday Overtime Pay"],
["Transportation Services",236250,"Non-Holiday Overtime Pay"],
["Transportation Services",1786501,"Other Services - Not Classified"],
["Transportation Services",104781070,"OTS Payroll"],
["Transportation Services",8015752,"OTS Payroll Taxes"],
["Transportation Services",36480,"Personal Svcs-Contract Positions"],
["Transportation Services",11350000,"Public Liability Insurance"],
["Transportation Services",0,"Recycling Services"],
["Transportation Services",6285768,"Regular Pay"],
["Transportation Services",15211142,"Retirement Plans-Bargaining Unit Employees"],
["Transportation Services",9402197,"Services-OTS Operations**"],
["Transportation Services",60,"Unleaded Gas"],
["Budget and Fiscal Services",2464016,"OTHER"],
["Community Services",12129579,"OTHER"],
["Corporation Counsel",647235,"OTHER"],
["Customer Services",4719830,"OTHER"],
["Design and Construction",-4886949,"OTHER"],
["Emergency Management",308446,"OTHER"],
["Emergency Services",6503101,"OTHER"],
["Enterprise Services",4825278,"OTHER"],
["Environmental Services",21597006,"OTHER"],
["Facility Maintenance",20814047,"OTHER"],
["Fire",11458551,"OTHER"],
["Human Resources",542504,"OTHER"],
["Information Technology",9271991,"OTHER"],
["Managing Director",795524,"OTHER"],
["Mayor",98006,"OTHER"],
["Medical Examiner",174579,"OTHER"],
["Neighborhood Commission",327000,"OTHER"],
["Parks and Recreation",13626991,"OTHER"],
["Planning and Permitting",-846583,"OTHER"],
["Police",18977888,"OTHER"],
["Prosecuting Attorney",2895783,"OTHER"],
["Royal Hawaiian Band",57418,"OTHER"],
["Transportation Services",18900766,"OTHER"],



["Bikeway Fund",28809,"Facility Maintenance"],
["Bikeway Fund",5550,"Parks and Recreation"],
["Bikeway Fund",403860,"Transportation Services"],
["Bus Transportation Fund",193279747,"Transportation Services"],
["Community Development Fund",681029,"Budget and Fiscal Services"],
["Community Development Fund",930042,"Community Services"],
["Federal Grants Fund",442989,"Budget and Fiscal Services"],
["Federal Grants Fund",20712415,"Community Services"],
["Federal Grants Fund",0,"Design and Construction"],
["Federal Grants Fund",181692,"Emergency Management"],
["Federal Grants Fund",0,"Environmental Services"],
["Federal Grants Fund",0,"Facility Maintenance"],
["Federal Grants Fund",0,"Fire"],
["Federal Grants Fund",47724,"Information Technology"],
["Federal Grants Fund",0,"Managing Director"],
["Federal Grants Fund",107610,"Parks and Recreation"],
["Federal Grants Fund",0,"Police"],
["Federal Grants Fund",1074531,"Prosecuting Attorney"],
["Federal Grants Fund",27209000,"Transportation Services"],
["General Fund",16412424,"Budget and Fiscal Services"],
["General Fund",3240648,"Community Services"],
["General Fund",7428754,"Corporation Counsel"],
["General Fund",19363582,"Customer Services"],
["General Fund",8355849,"Design and Construction"],
["General Fund",1003442,"Emergency Management"],
["General Fund",32455460,"Emergency Services"],
["General Fund",5574116,"Environmental Services"],
["General Fund",27836987,"Facility Maintenance"],
["General Fund",95631204,"Fire"],
["General Fund",5849069,"Human Resources"],
["General Fund",17768496,"Information Technology"],
["General Fund",2704115,"Managing Director"],
["General Fund",543348,"Mayor"],
["General Fund",1532079,"Medical Examiner"],
["General Fund",1030568,"Neighborhood Commission"],
["General Fund",61268279,"Parks and Recreation"],
["General Fund",13686178,"Planning and Permitting"],
["General Fund",198689431,"Police"],
["General Fund",16591048,"Prosecuting Attorney"],
["General Fund",1976398,"Royal Hawaiian Band"],
["General Fund",0,"Transportation Services"],
["Glass Incentive Account - SWSF",1995020,"Environmental Services"],
["Golf Fund",9823918,"Enterprise Services"],
["Hanauma Bay Nature Preserve Fund",834632,"Emergency Services"],
["Hanauma Bay Nature Preserve Fund",5000,"Enterprise Services"],
["Hanauma Bay Nature Preserve Fund",3002262,"Parks and Recreation"],
["Highway Beautification Fund",2707226,"Customer Services"],
["Highway Beautification Fund",154044,"Facility Maintenance"],
["Highway Beautification Fund",993649,"Parks and Recreation"],
["Highway Fund",5109685,"Design and Construction"],
["Highway Fund",35589796,"Facility Maintenance"],
["Highway Fund",2300647,"Planning and Permitting"],
["Highway Fund",25127260,"Police"],
["Highway Fund",7515350,"Transportation Services"],
["Housing & Comm Dev Rehab Fund",3205000,"Community Services"],
["Housing & Comm Dev Sec 8 Fund",155734,"Budget and Fiscal Services"],
["Housing & Comm Dev Sec 8 Fund",47612928,"Community Services"],
["Housing Development Special Fund",200000,"Facility Maintenance"],
["Leasehold Conversion Fund",89641,"Community Services"],
["Liquor Commission Fund",4100026,"Budget and Fiscal Services"],
["Liquor Commission Fund",126696,"Corporation Counsel"],
["Liquor Commission Fund",50988,"Information Technology"],
["Recycling Account - SWSF",11499324,"Environmental Services"],
["Recycling Account - SWSF",4949153,"Facility Maintenance"],
["Refuse Genl Operating Acct -SWSF",97340,"Budget and Fiscal Services"],
["Refuse Genl Operating Acct -SWSF",61984702,"Environmental Services"],
["Refuse Genl Operating Acct -SWSF",5067653,"Facility Maintenance"],
["Refuse Genl Operating Acct -SWSF",43296,"Information Technology"],
["Rental Assistance Fund",233000,"Community Services"],
["Sewer Fund",209852,"Budget and Fiscal Services"],
["Sewer Fund",408393,"Corporation Counsel"],
["Sewer Fund",1324628,"Design and Construction"],
["Sewer Fund",113064052,"Environmental Services"],
["Sewer Fund",2271762,"Facility Maintenance"],
["Sewer Fund",222288,"Information Technology"],
["Sewer Fund",325140,"Parks and Recreation"],
["Sewer Fund",1003140,"Planning and Permitting"],
["Sld Wst Dis Fac Acct - SWSF",106648975,"Environmental Services"],
["Special Events Fund",43541,"Budget and Fiscal Services"],
["Special Events Fund",11444014,"Enterprise Services"],
["Special Projects Fund",0,"Budget and Fiscal Services"],
["Special Projects Fund",4341230,"Community Services"],
["Special Projects Fund",42779,"Customer Services"],
["Special Projects Fund",31857,"Emergency Management"],
["Special Projects Fund",636138,"Emergency Services"],
["Special Projects Fund",0,"Fire"],
["Special Projects Fund",0,"Information Technology"],
["Special Projects Fund",0,"Managing Director"],
["Special Projects Fund",0,"Mayor"],
["Special Projects Fund",30000,"Parks and Recreation"],
["Special Projects Fund",0,"Planning and Permitting"],
["Special Projects Fund",0,"Police"],
["Special Projects Fund",457342,"Prosecuting Attorney"],
["Transit Fund",0,"Budget and Fiscal Services"],
["Transit Fund",0,"Corporation Counsel"],
["Transit Fund",0,"Design and Construction"],
["Transit Fund",0,"Planning and Permitting"],
["Zoo Animal Purchase Fund",2200,"Enterprise Services"],
	
];
      sankey = new Sankey();
      
      name_conversions = {
        "Ngas":"Natural gas",
        "UK land based bioenergy":"Forests & biocrops",
        "Bio-conversion":"Biomass processing",
        "H2 conversion":"Hydrogen production",
        "H2":"Hydrogen",
        "Useful district heat":"Delivered heat",
        "Heating and cooling - homes":"Home heating & cooling",
        "Heating and cooling - commercial":"Office heating & cooling",
        "Lighting & appliances - homes":"Home lighting & appliances",
        "Lighting & appliances - commercial":"Office lighting & appliances",
      }
      
      sankey.convert_box_description_labels_callback = function(name) {
        console.log(">"+name+"<");
        var alternative_name = name_conversions[name];
        if(alternative_name == null) alternative_name = name;
        return alternative_name;
      };
      
      sankey.stack(0,[
		"General Fund",
		"Bus Transportation Fund",
		"Sewer Fund",
		"Sld Wst Dis Fac Acct - SWSF",
		"Highway Fund",
		"Refuse Genl Operating Acct -SWSF",
		"Federal Grants Fund",
		"Housing & Comm Dev Sec 8 Fund",
		"Recycling Account - SWSF",
		"Special Events Fund",
		"Golf Fund",
		"Special Projects Fund",
		"Liquor Commission Fund",
		"Highway Beautification Fund",
		"Hanauma Bay Nature Preserve Fund",
		"Housing & Comm Dev Rehab Fund",
		"Glass Incentive Account - SWSF",
		"Community Development Fund",
		"Bikeway Fund",
		"Rental Assistance Fund",
		"Housing Development Special Fund",
		"Leasehold Conversion Fund",
		"Zoo Animal Purchase Fund",
		"Transit Fund"
      ]);
      
      
      sankey.stack(1,[
		"Environmental Services",
		"Transportation Services",
		"Police",
		"Fire",
		"Community Services",
		"Facility Maintenance",
		"Parks and Recreation",
		"Emergency Services",
		"Budget and Fiscal Services",
		"Customer Services",
		"Enterprise Services",
		"Information Technology",
		"Prosecuting Attorney",
		"Planning and Permitting",
		"Design and Construction",
		"Corporation Counsel",
		"Human Resources",
		"Managing Director",
		"Royal Hawaiian Band",
		"Medical Examiner",
		"Emergency Management",
		"Neighborhood Commission",
		"Mayor",
		
       ]);
      
      
      sankey.stack(2,[	
		"Regular Pay",
		"Other Services - Not Classified",
		"OTS Payroll",
		"Electricity",
		"DHCD-Rental Subsidy",
		"Non-Holiday Overtime Pay",
		"Diesel",
		"Solid Waste Disposal (including management svcs)",
		"Health, Welfare & Medical Plans-Bargaining Unit Em",
		"Retirement Plans-Bargaining Unit Employees",
		"Holiday Overtime Pay",
		"Consultant Services",
		"Sub Recipient Grants",
		"Public Liability Insurance",
		"Recycling Services",
		"Personal Svcs-Contract Positions",
		"Services-OTS Operations**",
		"Auto Allowance HPD/HFD/CCL",
		"Bus Parts**",
		"Chemical Supplies",
		"Unleaded Gas",
		"OTS Payroll Taxes",
		"OTHER"
       ]);
      
      // Nudge
//      sankey.nudge_boxes_callback = function() {
//        sankey.boxes["Losses"].y = (sankey.boxes["Marine algae"].b() - sankey.boxes["Losses"].size());
        // sankey.boxes["Exports"].y = (sankey.boxes["Losses"].y - sankey.boxes["Exports"].size() - y_space);
        // sankey.boxes["Over generation / exports"].y = (sankey.boxes["Exports"].y - sankey.boxes["Over generation / exports"].size() - y_space);        
      //}
      
      // Colours
      sankey.setColors({
        "Environmental Services":"#8F6F38",
        "Transportation Services":"#8F6F38", 
        "Police":"#8F6F38",
        
        "Fire":"#A99268", 
        "Community Services":"#A99268", 
        "Facility Maintenance":"#A99268", 
        
		"Parks and Recreation":"#DDD4C4", 
		"Emergency Services":"#DDD4C4", 
		"Customer Services":"#DDD4C4", 
        
		"Enterprise Services":"#F6FF00", 
		"Information Technology ":"#F6FF00",
        "Solar PV":"#F6FF00",
        
		"Prosecuting Attorney":"#30FF00", 
		"Planning and Permitting":"#30FF00", 
		"Design and Construction":"#30FF00", 
		"Corporation Counsel":"#30FF00", 
		"Human Resources":"#30FF00", 
		"Managing Director":"#30FF00", 
		"Royal Hawaiian Band":"#30FF00", 
        
		"Medical Examiner":"#557731", 
		"Emergency Management":"#7D9763", 
		"Neighborhood Commission":"#BCC2AD", 
        
		"Mayor":"#0000FF",
        "Thermal generation":"#0000FF", 
        "CHP":"#FF0000", 
        "Nuclear":"#E2ABDB", 
        
		"Mayor2":"#FF0000", 
        "Pumped heat":"#FF0000", 
        "Useful district heat":"#FF0000",
        "CHP Heat":"#FF0000",
        
        "Electricity imports":"#0000FF", 
        "Wind":"#C7E7E6", 
        "Tidal":"#C7E7E6", 
        "Wave":"#C7E7E6", 
        "Geothermal":"#C7E7E6", 
        "Hydro":"#C7E7E6", 
        
        "H2 conversion":"#FF6FCF", 
        "Final electricity":"#0000FF", 
        "Over generation / exports":"#0000FF", 
        "H2":"#FF6FCF" 
      });
      
      // Add the emissions
      // sankey.boxes["Thermal generation"].ghg = 100;
      // sankey.boxes["CHP"].ghg = 10;
      // sankey.boxes["UK land based bioenergy"].ghg = -100;
      // sankey.boxes["Heating and cooling - homes"].ghg = 20;
      
      // // Fix some of the colours
      // sankey.nudge_colours_callback = function() {
      //   this.recolour(this.boxes["Losses"].left_lines,"#AAAAAA");
      //   this.recolour(this.boxes["District heating"].left_lines,"#FF0000");
      //   this.recolour(this.boxes["Electricity grid"].left_lines,"#0000FF");
      // };
      
      sankey.y_space = 10;
      sankey.right_margin = 250;
      sankey.left_margin = 200;
      
      sankey.convert_flow_values_callback = function(flow) {
	        return flow * 0.0000004; // Pixels per TWh
      };
      
      sankey.convert_flow_labels_callback = function(flow) {
        return Math.round(flow);
      };
      
      sankey.convert_box_value_labels_callback = function(flow) {
        return (""+Math.round(flow)+"$");
      };
      
      sankey.setData(raw_data);
      sankey.draw();
    });
      
    </script>
    <h1 style='width:1000px; text-align: center; margin-bottom: 0'>Honolulu City and County Budget</h1>
    <div style='width:1000px; text-align: center; margin-top: 0'>Move your mouse over the diagram to show values</div>
    <div id='sankey' style="width:1500px;height:750px">
      &nbsp;
    </div>
  </body>
</html>

